#!/bin/bash


function LOGSTART() {

echo "################################################" >> install.log
echo "  Installing $1" >> install.log
echo "################################################" >> install.log
echo "   Start: " `date` >> install.log
}


function LOGSTOP() {
echo "    Stop: " `date` >> install.log

}




echo "" > install.log

LOGSTART "apt-get update"

sudo apt-get update
IOTKITDIR=`pwd`;
export IOTKITDIR
sudo mkdir $IOTKITDIR/../iot-gateway-kit-depend
export IOTKITDEPEND=$IOTKITDIR/../iot-gateway-kit-depend

LOGSTOP
LOGSTART "Informix User"


################################
# Create Informix user
################################
echo "============================================"
echo "-  Installing Informix user                -"
echo "============================================"

. $IOTKITDIR/scripts/install.informix.user

LOGSTOP
LOGSTART "Node"


################################
# Install Node
################################
echo "============================================"
echo "-  Installing Node                         -"
echo "============================================"
. $IOTKITDIR/scripts/install.node


LOGSTOP
LOGSTART "Node-Red"
################################
# Install Node-red
################################
echo "============================================"
echo "-  Installing Node Red                     -"
echo "============================================"
. $IOTKITDIR/scripts/install.nodered

LOGSTOP
LOGSTART "Ble"
################################
# Install Ble
################################
echo "============================================"
echo "-  Installing BLE                          -"
echo "============================================"
. $IOTKITDIR/scripts/install.ble

LOGSTOP
LOGSTART "Zwave"
################################
# Install Zwave
################################
echo "============================================"
echo "-  Installing Zwave                        -"
echo "============================================"
. $IOTKITDIR/scripts/install.zwave

LOGSTOP
LOGSTART "Informix Product"
################################
# Install Informix Product 
################################
echo "============================================"
echo "-  Installing Informix Product             -"
echo "============================================"

. $IOTKITDIR/scripts/install.informix.prod


LOGSTOP
LOGSTART "Informix General"
################################
# Install Informix 
################################
echo "============================================"
echo "-  Installing Informix General             -"
echo "============================================"
. $IOTKITDIR/scripts/install.informix.general

sudo service iot start



LOGSTOP

