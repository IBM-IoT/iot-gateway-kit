#!/bin/bash

date > log
echo "apt-get update" >> log

sudo apt-get update
IOTKITDIR=`pwd`;
export IOTKITDIR
sudo mkdir $IOTKITDIR/../iot-gateway-kit-depend
export IOTKITDEPEND=$IOTKITDIR/../iot-gateway-kit-depend


date >> log
echo "Installing informix user" >> log
################################
# Create Informix user
################################
echo "============================================"
echo "-  Installing Informix user                -"
echo "============================================"

. $IOTKITDIR/scripts/install.informix.user

date >> log
echo "Installing Node" >> log
################################
# Install Node
################################
echo "============================================"
echo "-  Installing Node                         -"
echo "============================================"
. $IOTKITDIR/scripts/install.node


date >> log
echo "Installing node-red" >> log
################################
# Install Node-red
################################
echo "============================================"
echo "-  Installing Node Red                     -"
echo "============================================"
. $IOTKITDIR/scripts/install.nodered

date >> log
echo "Installing ble" >> log
################################
# Install Ble
################################
echo "============================================"
echo "-  Installing BLE                          -"
echo "============================================"
. $IOTKITDIR/scripts/install.ble

date >> log
echo "Installing zwave" >> log
################################
# Install Zwave
################################
echo "============================================"
echo "-  Installing Zwave                        -"
echo "============================================"
. $IOTKITDIR/scripts/install.zwave

################################
# Install Informix Product 
################################
echo "============================================"
echo "-  Installing Informix Product             -"
echo "============================================"

. $IOTKITDIR/scripts/install.informix.prod


date >> log
echo "Installing informix" >> log
################################
# Install Informix 
################################
echo "============================================"
echo "-  Installing Informix General             -"
echo "============================================"
. $IOTKITDIR/scripts/install.informix.general

sudo service iot start

#cd ~informix/node-red
#sudo ./start.nodered


sudo bash -c "echo 'informix ALL=(ALL) NOPASSWD: ALL' >> /etc/sudoers"

date >> log
echo "Finished" >> log

